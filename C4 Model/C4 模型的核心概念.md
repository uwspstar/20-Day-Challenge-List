# C4 模型的核心概念

C4 模型是一个简单、分层的架构模型，帮助开发者和架构师用四个不同的抽象层次来可视化软件系统。C4 模型的核心概念包括 **Context（系统上下文图）**、**Container（容器图）**、**Component（组件图）** 和 **Code（代码级别图）**，它们逐步分解系统，使其更加清晰易懂。

---

#### 1. Context 图（系统上下文图）

**定义**：
Context 图展示了目标系统与外部系统或用户的交互，帮助理解系统的边界和外部环境。

**作用**：
- 通过上下文图可以明确系统的作用、系统的用户、系统与其他系统的交互。
- 强调的是高层次的概览，展示系统与外部世界的关系。

**例子**：
- 如果你要展示一个在线购物系统，Context 图会显示：用户、支付服务、物流系统等与该购物系统的交互关系。

---

#### 2. Container 图（容器图）

**定义**：
Container 图展示了系统内部的主要容器（如 Web 服务器、数据库、微服务等），并描述了容器之间的交互。

**作用**：
- 容器代表的是在系统中的运行时进程或存储单元。
- 通过容器图可以理解系统中的不同构件如何协同工作。
  
**例子**：
- 对于在线购物系统，Container 图可能包括：Web 应用、订单服务、支付服务、数据库等容器。

---

#### 3. Component 图（组件图）

**定义**：
Component 图展示了每个容器内部的组件及其交互关系，帮助理解系统的内部实现细节。

**作用**：
- 每个容器被分解为更小的组件，代表代码中的类或模块。
- 通过组件图可以了解容器内的工作原理和每个组件的职责。

**例子**：
- 订单服务的容器可能包含订单管理、库存检查、支付处理等组件。

---

#### 4. Code 图（代码级别图）

**定义**：
Code 图深入到代码层面，展示每个组件内部的代码结构，通常为 UML 类图。

**作用**：
- 展示了组件中类或对象的具体实现方式。
- 适用于对系统的最细节层面进行分析和设计。

**例子**：
- 针对支付处理组件，Code 图可能展示具体的类结构、方法和交互细节。

---

### C4 模型的分层结构

| 层次 | 描述 |
|-----|-----|
| Context | 高层次系统和外部环境的交互 |
| Container | 系统内部主要容器的结构和交互 |
| Component | 容器内部组件的细节及其相互关系 |
| Code | 代码级别的详细实现 |

---

### 小结

- **Context 图** 让你看到系统的全貌及外部交互。
- **Container 图** 让你理解系统的构成和容器之间的关系。
- **Component 图** 让你深入了解每个容器内部的逻辑。
- **Code 图** 则深入到代码层次，帮助分析具体实现。

C4 模型通过逐步分解系统，使复杂的系统结构能够被不同角色（如开发者、架构师、非技术人员）理解，并为系统的设计、开发和维护提供了统一的视角和工具。
