# 二分查找模板解析及面试问题解答

1. 二分查找模板

二分查找是一种高效的查找算法，常用于有序数组中查找符合特定条件的元素。其核心在于将数组一分为二，逐步缩小查找范围。以下是一个通用的二分查找模板，其中 feasible 函数负责判断中间元素是否满足条件。

def binary_search(arr: List[int], target: int) -> int:
    left, right = 0, len(arr) - 1  # 初始化左右指针
    first_true_index = -1  # 初始化结果变量为 -1，表示未找到
    while left <= right:  # 当左指针小于等于右指针时，继续二分查找
        mid = (left + right) // 2  # 计算中间索引
        if feasible(mid):  # 判断中间索引是否满足条件
            first_true_index = mid  # 如果满足条件，更新结果
            right = mid - 1  # 继续向左半部分搜索，寻找第一个满足条件的值
        else:  # 如果不满足条件
            left = mid + 1  # 继续向右半部分搜索
    return first_true_index  # 返回结果索引

2. feasible 函数的设计

在这个模板中，feasible 函数决定了当前中间元素 arr[mid] 是否满足条件。不同问题中 feasible 的定义各不相同。例如：

	•	布尔数组查找第一个 True：feasible(mid) 可以定义为 arr[mid] == True。
	•	查找第一个大于等于目标值的元素：feasible(mid) 可以定义为 arr[mid] >= target。
	•	查找满足某个区间条件的元素：feasible(mid) 可以定义为 min_value <= arr[mid] <= max_value。

3. 面试问题解答

面试问题 1：如何根据不同场景来定义 feasible 函数？

	•	问题描述：
在不同的二分查找问题中，feasible 函数负责判断给定的 mid 索引是否满足某个条件。根据问题的不同，feasible 函数的定义也需要变化。
	•	解答：
	•	寻找布尔数组中第一个 True：feasible(mid) 可以定义为 arr[mid] == True。
	•	寻找第一个大于等于目标值的元素：feasible(mid) 可以定义为 arr[mid] >= target。
	•	寻找满足某个区间条件的元素：feasible(mid) 可以定义为 min_value <= arr[mid] <= max_value。
总的来说，feasible 函数是用于检查 arr[mid] 是否符合问题给定的条件。关键是找到可以缩小搜索空间的逻辑，让二分查找有明确的停止条件。

面试问题 2：在一个严格递增的数组中，如何找到第一个大于某个目标值的元素？

	•	问题描述：
给定一个严格递增的数组，要求找到数组中第一个大于目标值 target 的元素，返回其索引。如果不存在这样的元素，返回 -1。
	•	解答：
在这个问题中，我们可以通过二分查找来解决，并使用以下 feasible 函数：

def feasible(mid):
    return arr[mid] > target

	•	步骤：
	1.	初始化左右指针 left = 0, right = len(arr) - 1。
	2.	进行二分查找，通过 feasible(mid) 函数判断 arr[mid] 是否大于目标值 target。
	3.	如果 arr[mid] > target，则更新边界，继续向左侧查找，直到找到第一个大于 target 的元素。
	4.	如果不存在满足条件的元素，返回 -1。
	•	代码示例：

def find_first_greater(arr: List[int], target: int) -> int:
    left, right = 0, len(arr) - 1
    result = -1
    while left <= right:
        mid = (left + right) // 2
        if arr[mid] > target:
            result = mid  # 找到符合条件的值，更新结果
            right = mid - 1  # 继续向左查找
        else:
            left = mid + 1  # 继续向右查找
    return result



面试问题 3：如何修改二分查找来寻找最后一个满足条件的值？

	•	问题描述：
二分查找通常用于寻找第一个满足条件的值。如果我们需要找到最后一个满足条件的值，如何修改二分查找的逻辑？
	•	解答：
要找到最后一个满足条件的值，我们需要在满足条件时，不是向左继续查找，而是向右继续查找。通过这种方式，我们可以确保查找的范围缩小到最后一个满足条件的值。
	•	步骤：
	1.	初始化左右指针 left = 0, right = len(arr) - 1。
	2.	进行二分查找，如果 feasible(mid) 返回 True，说明当前值满足条件，但为了找到最后一个满足条件的值，需要将左指针向右移动，继续查找右侧。
	3.	直到左指针与右指针相遇，返回找到的最后一个满足条件的值的索引。
	•	代码示例：

def find_last_feasible(arr: List[int], feasible: Callable[[int], bool]) -> int:
    left, right = 0, len(arr) - 1
    result = -1
    while left <= right:
        mid = (left + right) // 2
        if feasible(mid):
            result = mid  # 记录满足条件的结果
            left = mid + 1  # 继续向右查找，寻找最后一个满足条件的值
        else:
            right = mid - 1  # 向左继续查找
    return result



总结：

这篇文章介绍了二分查找的通用模板，以及如何根据不同问题定义 feasible 函数。此外，还解答了面试中常见的与二分查找相关的问题，包括如何找第一个满足条件的值、如何找第一个大于目标值的元素，以及如何找最后一个满足条件的元素。通过对这些问题的分析，我们可以更好地掌握二分查找的应用技巧。
