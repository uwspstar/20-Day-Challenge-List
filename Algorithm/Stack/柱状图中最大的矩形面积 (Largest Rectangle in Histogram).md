### **题目：柱状图中最大的矩形面积 (Largest Rectangle in Histogram)**

---

### **代码实现**：
```python
from typing import List

class Solution:
    def largestRectangleArea(self, heights: List[int]) -> int:
        maxArea = 0
        stack = []  # 栈存储元组：(柱子的起始索引, 柱子高度)

        # 遍历柱子的索引和高度
        for i, h in enumerate(heights):
            start = i
            # 当栈不为空且当前柱子的高度小于栈顶柱子的高度
            while stack and stack[-1][1] > h:
                index, height = stack.pop()
                # 计算以弹出柱子为高的矩形面积
                maxArea = max(maxArea, height * (i - index))
                start = index  # 更新起始索引
            stack.append((start, h))  # 将当前柱子加入栈

        # 遍历栈中剩余的柱子
        for i, h in stack:
            maxArea = max(maxArea, h * (len(heights) - i))  # 计算剩余柱子的最大面积
        
        return maxArea
```

---

### **算法解析：**

#### **栈的作用**：
- 使用单调递增栈保存柱子的起始索引和高度。
- 当遍历到一个较短柱子时，计算并弹出较高柱子的面积，确保栈中柱子的高度保持递增顺序。

#### **核心思想**：
1. 每当柱子高度下降时，意味着以栈中柱子为高的矩形结束。
2. 将当前柱子视为新的起点，并更新起始索引。

---

### **时间和空间复杂度分析**：

#### **时间复杂度**：
- 每个柱子最多入栈一次、出栈一次，总操作次数为 \(O(n)\)。
- 因此，总时间复杂度为 **\(O(n)\)**。

#### **空间复杂度**：
- 栈的空间消耗取决于柱子的数量，最坏情况下为 \(O(n)\)。
- 因此，总空间复杂度为 **\(O(n)\)**。

---

### **示例运行步骤**：

#### **输入**：
```python
heights = [2, 1, 5, 6, 2, 3]
```

#### **步骤**：

1. 初始化：
   - `maxArea = 0`
   - `stack = []`

2. 遍历柱子：
   - **柱子 1**: 高度 `2`：
     - 栈为空，直接入栈：`stack = [(0, 2)]`
   - **柱子 2**: 高度 `1`：
     - 栈顶高度 `2 > 1`，弹出 `(0, 2)`，计算面积：`maxArea = 2 * (1 - 0) = 2`
     - 更新起点索引：`start = 0`
     - 入栈：`stack = [(0, 1)]`
   - **柱子 3**: 高度 `5`：
     - 栈顶高度 `1 < 5`，直接入栈：`stack = [(0, 1), (2, 5)]`
   - **柱子 4**: 高度 `6`：
     - 栈顶高度 `5 < 6`，直接入栈：`stack = [(0, 1), (2, 5), (3, 6)]`
   - **柱子 5**: 高度 `2`：
     - 栈顶高度 `6 > 2`，弹出 `(3, 6)`，计算面积：`maxArea = 6 * (4 - 3) = 6`
     - 栈顶高度 `5 > 2`，弹出 `(2, 5)`，计算面积：`maxArea = 5 * (4 - 2) = 10`
     - 更新起点索引：`start = 2`
     - 入栈：`stack = [(0, 1), (2, 2)]`
   - **柱子 6**: 高度 `3`：
     - 栈顶高度 `2 < 3`，直接入栈：`stack = [(0, 1), (2, 2), (5, 3)]`

3. 遍历栈中剩余柱子：
   - **柱子 `(0, 1)`**：计算面积：`maxArea = max(10, 1 * (6 - 0)) = 10`
   - **柱子 `(2, 2)`**：计算面积：`maxArea = max(10, 2 * (6 - 2)) = 10`
   - **柱子 `(5, 3)`**：计算面积：`maxArea = max(10, 3 * (6 - 5)) = 10`

4. 返回结果：
   ```python
   maxArea = 10
   ```

---

### **输出**：
```python
输入: [2, 1, 5, 6, 2, 3]
输出: 10
```

---

### **总结**：

- **关键点**：
  - 使用单调递增栈维护柱子的索引和高度。
  - 遇到高度降低时，计算以弹出柱子为高的矩形面积。

- **优点**：
  - 通过栈的方式高效计算面积，无需遍历多次。
  - 时间复杂度 \(O(n)\) 在大规模数据上表现良好。

---

希望这个解析清楚了！如有进一步问题，欢迎继续提问。 😊
