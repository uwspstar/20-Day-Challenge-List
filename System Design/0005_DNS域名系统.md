### 域名系统 (Domain Name System - DNS)

域名系统（DNS）可以类比为互联网的电话簿。正如我们在手机中保存联系人来避免记忆数百个电话号码一样，DNS 是一个分布式的分层命名系统，它将易于阅读的网站名称转换为数字 IP 地址。

#### DNS 如何工作？

当我们在浏览器中输入域名（如 google.com）时，域名系统会将其翻译为 IP 地址（例如 142.251.211.238），使计算机能够识别并将请求路由到互联网上的正确位置。

#### ICANN 与域名注册商

关键问题是：谁决定哪个域名对应哪个 IP 地址，特别是该域名归谁所有？比如，为什么不是任何人都可以声称拥有 google.com？要回答这个问题，我们需要了解 **ICANN**（互联网名称与数字地址分配机构）和域名注册商的作用及其区别。

- **ICANN**：类似于购物中心的管理公司，确保互联网基础设施的运行。
- **域名注册商**：类似于商铺租赁提供商，提供域名注册服务。注册商由 ICANN 授权，负责帮助用户搜索可用的域名并完成注册过程。

#### 用户案例：
1. **Alice 想创建一个博客**：她通过域名注册商如 GoDaddy 注册了域名 `aliceblog.com`，并确认了该域名的唯一性。
2. **Bob 想为公司注册域名**：他使用 Google Domains 寻找并注册了 `bobcorporate.io`，ICANN 授权的域名注册商负责将域名与正确的 IP 地址映射。

#### DNS 记录

DNS 记录是存储与域名或子域名相关信息的条目。最常见的 DNS 记录类型是 **A 记录**，它将域名与 IPv4 地址相关联。例如，如果请求 `neetcode.io`，DNS 记录将包含相应的 IP 地址（如 192.158.1.39），以将请求路由到托管该网站的服务器。

#### 用户案例：
1. **访问网站**：Alice 在浏览器中输入 `neetcode.io`，DNS 系统通过 A 记录将该域名解析为对应的 IP 地址，并将请求发送到该服务器。
2. **优化访问速度**：Bob 访问公司内部的私有服务器，DNS 记录将其域名解析为固定的 IP 地址，并存储在本地缓存中，避免重复查询。

#### URL 的结构解析

以 `https://domains.google.com/get-started` 为例，URL 分为以下部分：

1. **协议（Scheme）**：
   - 指示访问资源所使用的协议，如 HTTP 或 HTTPS。HTTPS 是目前互联网最常用的协议，确保数据传输的安全性。
   
   - **用户案例**：
     1. Alice 访问在线银行时，使用 HTTPS 协议确保连接安全。
     2. Bob 通过 FTP 协议从远程服务器下载文件，使用 `ftp://` 指定了文件传输协议。

2. **域名（Domain）**：
   - 由 **子域名**、**主域名** 和 **顶级域名（TLD）** 组成。
   - `domains.google.com` 中 `domains` 是子域名，`google` 是主域名，`.com` 是顶级域名，表明这是一个商业网站。

   - **用户案例**：
     1. Alice 注册了域名 `aliceblog.com`，并创建了子域名 `shop.aliceblog.com` 作为其在线商店。
     2. Bob 的公司使用顶级域名 `.io`，以反映其科技公司的身份，域名为 `bobtech.io`。

3. **路径（Path）**：
   - 在域名之后，URL 中的路径用来指定网站内的特定内容或资源。例如 `/get-started` 表示网站中的特定页面或功能。

   - **用户案例**：
     1. Alice 在 `aliceblog.com/posts/get-started` 中查看特定的博客文章。
     2. Bob 通过 `bobtech.io/products/latest` 查看公司网站的最新产品信息。

4. **端口（Ports）**：
   - 默认情况下，HTTP 协议使用端口 80，HTTPS 使用端口 443。如果使用非标准端口，如 8080，则必须在 URL 中显式指定。

   - **用户案例**：
     1. Alice 在本地开发时，使用 `localhost:8080` 来测试她的 Angular 应用。
     2. Bob 通过端口 `22` 使用 SSH 协议连接到远程服务器，执行安全的命令行操作。

#### DNS 系统中的其他关键点：
- **缓存**：当 DNS 服务器将域名解析为 IP 地址后，客户端会将该 IP 地址存储在缓存中，减少下一次请求时的查询时间。
  
- **ICANN 的作用**：负责监督域名系统的运作，授权域名注册商，并确保互联网的整体协调和安全。

### 总结

DNS 作为互联网的“电话簿”，使我们能够通过易记的域名访问网站，而不需要记住复杂的 IP 地址。域名系统中的各个部分——从 ICANN 到注册商、DNS 记录、URL 结构——共同确保互联网的流畅和安全运行。在开发和使用过程中，理解 DNS 的工作原理有助于优化应用性能并提高用户体验。
